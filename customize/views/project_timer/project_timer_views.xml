<?xml version="1.0"?>
<odoo>
    <data>
        <template id="assets_backend_timer" name="timer assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/customize/static/src/js/ProjectTimer/ProjectTimer.js"></script>
                <script type="text/javascript" src="/customize/static/src/js/ProjectTimer/play_suggestion.js"></script>
            </xpath>
        </template>


                <!--  added itundra-->
<record id="project_task_timer_app_view_task_tree2_custom" model="ir.ui.view">
    <field name="name">project_task_timer_app_project.task.tree.custom</field>
    <field name="model">project.task</field>
    <field name="inherit_id" ref="project.view_task_tree2" />
    <field name="priority">1050</field>
    <field name="arch" type="xml">

        <field name="company_id" position="attributes">
             <attribute name="optional">hide</attribute>
        </field>



        <field name="message_needaction" position="after">
            <field name="task_run" invisible="1" modifiers="{'invisible':true}"/>
            <field name="task_pause" invisible="1" modifiers="{'invisible':true}"/>
            <field name="is_started" invisible="1" modifiers="{'invisible':true}"/>
            <field name="is_user_working" invisible="1" />

            <field name="time_count" class="my-auto text-danger font-weight-bold ml16 h4" widget="task_time_counter" attrs="{'invisible' : [('is_started', '=', False)]}"/>
            <button name="run_task" type="object" class="btn text-success fa fa-play" attrs="{'invisible' : [('task_run', '=', True)]}" title="Run task" aria-label="Run task"/>
            <button name="unpause_task" type="object" class="btn text-success fa fa-forward" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', False)]}" title="Unpause task" aria-label="Unpause task"/>
            <button name="pause_task" type="object" class="btn text-info fa fa-pause" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', True)]}" title="Pause task" aria-label="Pause task"/>
            <button name="stop_task" type="object" class="btn text-danger fa fa-stop" attrs="{'invisible' : [('task_run', '=', False)]}" title="Stop task" aria-label="Stop task"/>
        </field>

        <xpath expr="//tree" position="inside">
            <field name="one__prevision_de_entrega" string="1) Previsión de entrega" optional="hide"/>
            <field name="one__1_reunion_cn" string="1ª reunión CN" optional="hide"/>
            <field name="one__final_de_entrega" string="1) Final de entrega" optional="hide"/>
        </xpath>

    </field>
</record>

   <record id="project_task_timer_app_view_inherit_project_task" model="ir.ui.view">
            <field name="name">project_task_timer_app_view.inherit.project.task</field>
            <field name="model">project.task</field>
            <field name="priority" eval="1050"/>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_assign_to_me']" position="after">

                    <field name="time_count" class="my-auto text-danger font-weight-bold ml16 h4" widget="task_time_counter" attrs="{'invisible' : [('is_started', '=', False)]}"/>
                    <field name="is_user_working" invisible="1" />

                    <button name="run_task" type="object" class="btn text-success fa fa-play" attrs="{'invisible' : [('task_run', '=', True)]}" title="Run task" aria-label="Run task"/>

                    <button name="unpause_task" type="object" class="btn text-success fa fa-forward" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', False)]}" title="Unpause task" aria-label="Unpause task"/>

                    <button name="pause_task" type="object" class="btn text-info fa fa-pause" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', True)]}" title="Pause task" aria-label="Pause task"/>

                    <button name="stop_task" type="object" class="btn text-danger fa fa-stop" attrs="{'invisible' : [('task_run', '=', False)]}" title="Stop task" aria-label="Stop task"/>

                </xpath>
                <xpath expr="//field[@name='project_id']" position="after">
                                <field name="task_run" invisible="1" modifiers="{'invisible':true}"/>
                                <field name="task_pause" invisible="1" modifiers="{'invisible':true}"/>
                    <field name="is_started" invisible="1" modifiers="{'invisible':true}"/>

                </xpath>
                <xpath expr="//notebook/page[@name='extra_info']" position="after">
                        <page string="Duration" invisible="1">
                                <field name="duration_ids">
                                <tree>
                                        <field name="date_start"/>
                                        <field name="date_end"/>
                                        <field name="duration" widget="float_time"/>
                                </tree>
                        </field>
                        </page>
                </xpath>
            </field>
        </record>

        <record id="project_task_timer_app_view_inherit_project_task_kanban_view" model="ir.ui.view">
            <field name="name">project_task_timer_app_view.inherit.project.task.kanban.view</field>
            <field name="model">project.task</field>
            <field name="priority" eval="1050"/>
            <field name="inherit_id" ref="project.view_task_kanban"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='color']" position="before">
                                <field name="task_run" invisible="1" modifiers="{'invisible':true}"/>
                                <field name="task_pause" invisible="1" modifiers="{'invisible':true}"/>
                    <field name="is_started" invisible="1" modifiers="{'invisible':true}"/>
                </xpath>

                <xpath expr="//div[hasclass('o_kanban_record_bottom')]" position="after">

                            <button name="run_task" type="object" class="btn text-success fa fa-play" attrs="{'invisible' : [('task_run', '=', True)]}" title="Run task" aria-label="Run task"/>

                    <button name="unpause_task" type="object" class="btn text-success fa fa-forward" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', False)]}" title="Unpause task" aria-label="Unpause task"/>

                    <button name="pause_task" type="object" class="btn text-info fa fa-pause" attrs="{'invisible' : ['|',('task_run', '=', False),('task_pause', '=', True)]}" title="Pause task" aria-label="Pause task"/>

                    <button name="stop_task" type="object" class="btn text-danger fa fa-stop" attrs="{'invisible' : [('task_run', '=', False)]}" title="Stop task" aria-label="Stop task"/>

                    <field name="time_count" class="text-center" widget="task_time_counter" attrs="{'invisible' : [('is_started', '=', False)]}"/>
                    <field name="is_user_working" invisible="1"/>

                </xpath>
            </field>
        </record>

        <record id="view_wizard_stop_task_des" model="ir.ui.view">
            <field name="name">Wizard Stop Task</field>
            <field name="model">wiz.stop.task</field>
            <field name="arch" type="xml">
                <form string="Worksheet">
                    <group string="Select Employee">
                       <group>
                            <field name="employee_id" string="Employee" class="oe_inline"  required="True"
                            options="{'no_create_edit': True, 'no_quick_create': True}"/>
                       </group>
                        <group col="1">
                             <span class="image_div"
                                style="
                                    float: left;
                                    margin-left: -6rem;
                                    margin-top: -2rem;
                                ">
                            <field name="image_128" widget="image" class="img img-fluid" nolabel="1"
                                style="
                                max-width: 50px;
                                max-height: 50px;"/>
                            </span>
                        </group>
                    </group>

                    <group string="Sumbit Hours">
                        <field name="time_spent" string="Duration" class="oe_inline" widget="float_time" required="True"/>
                        <field name="description" widget="text" placeholder="Describe your activity..."/>
                    </group>
                    <footer>
                        <button name="submit_desc" type="object" string="Save" class="btn-primary"/>
                        <button string="Cancel" class="btn-default" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

        <record id="view_wizard_start" model="ir.ui.view">
            <field name="name">Wizard Start Task</field>
            <field name="model">task.start.wiz</field>
            <field name="arch" type="xml">
                <form string="You have task already running">
                    <div class="row">
                        <div class="h3 ml32 mr32">
                            You already have a running task. Do you want to pause it?
                        </div>
                    </div>
                    <footer>
                        <button name="sub_start" type="object" string="Yes" class="btn-primary"/>
                        <button string="Cancel" class="btn-default" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>
    </data>
</odoo>